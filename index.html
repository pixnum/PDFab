<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>PDFab ‚Äî ¬© PDFab 2025</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%2333a6a6'/%3E%3Ctext x='50' y='60' font-size='48' font-family='Arial' fill='white' text-anchor='middle'%3EPD%3C/text%3E%3C/svg%3E">
<style>
  * { box-sizing: border-box; }
  body { margin:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#e0f2f2; display:flex; justify-content:center; padding:20px; }
  .app-frame { width:100%; max-width:1200px; border-radius:24px; padding:16px; background:#e0f2f2; box-shadow: 8px 8px 20px #b0c4c4, -8px -8px 20px #ffffff; display:flex; flex-direction:column; min-height:90vh; }
  header { display:flex; justify-content:space-between; align-items:center; padding:12px 24px; background:#e0f2f2; border-radius:16px; box-shadow: inset 4px 4px 10px #b0c4c4, inset -4px -4px 10px #ffffff; }
  .brand .title { font-size:24px; font-weight:900; color:#333; }
  .brand .sub { font-size:13px; color:#555; font-weight:600; }
  button { cursor:pointer; border:none; border-radius:12px; padding:10px 16px; font-weight:700; background:#e0f2f2; box-shadow: 4px 4px 6px #b0c4c4, -4px -4px 6px #ffffff; transition:0.2s; }
  button:hover { box-shadow: inset 4px 4px 6px #b0c4c4, inset -4px -4px 6px #ffffff; }
  .workspace { display:flex; flex:1 1 auto; gap:20px; margin-top:20px; }
  .left { flex:1; display:flex; flex-direction:column; gap:16px; }
  .toolbar { display:flex; flex-wrap:wrap; gap:12px; padding:12px; border-radius:16px; background:#e0f2f2; box-shadow: inset 4px 4px 10px #b0c4c4, inset -4px -4px 10px #ffffff; }
  .canvas-wrap { flex:1; display:flex; justify-content:center; overflow:auto; }
  .page { background:#e0f2f2; border-radius:24px; padding:36px 44px; width:100%; max-width:840px; min-height:1180px; box-shadow: 8px 8px 20px #b0c4c4, -8px -8px 20px #ffffff; display:flex; flex-direction:column; }
  .editor { flex:1; background:#e0f2f2; border-radius:18px; padding:20px 28px; font-size:18px; line-height:1.6; color:#333; outline:none; overflow:auto; text-align:center; }
  .editor img { max-width:80%; border-radius:16px; margin:16px auto; display:block; cursor:pointer; transition:transform 0.2s; }
  .right { width:360px; background:#e0f2f2; border-radius:24px; padding:24px; box-shadow: 8px 8px 20px #b0c4c4, -8px -8px 20px #ffffff; display:flex; flex-direction:column; gap:24px; }
  .panel { background:#e0f2f2; border-radius:20px; padding:16px 20px; box-shadow: inset 4px 4px 10px #b0c4c4, inset -4px -4px 10px #ffffff; }
  .panel h4 { margin-top:0; margin-bottom:12px; font-weight:800; color:#333; }
  .panel input, .panel select { width:100%; padding:10px; border-radius:12px; border:none; box-shadow: inset 4px 4px 6px #b0c4c4, inset -4px -4px 6px #ffffff; margin-top:6px; }
  footer { text-align:center; margin-top:12px; font-weight:600; color:#555; }
  body.dark-mode { background:#121212; }
  body.dark-mode .app-frame, body.dark-mode header, body.dark-mode .toolbar, body.dark-mode .page, body.dark-mode .right, body.dark-mode .panel { background:#1a1a1a; color:#a0eaea; box-shadow: inset 4px 4px 10px #111, inset -4px -4px 10px #222; }
  body.dark-mode button { background:#1a1a1a; box-shadow:4px 4px 8px #111, -4px -4px 8px #222; color:#a0eaea; }
</style>
</head>
<body>
<div class="app-frame">
<header>
  <div class="brand">
    <div class="title">PDFab</div>
    <div class="sub">¬© PDFab 2025</div>
  </div>
  <button id="themeToggle" aria-pressed="false">Toggle Theme</button>
</header>

<div class="workspace">
  <section class="left">
    <div class="toolbar">
      <button data-cmd="bold"><b>B</b></button>
      <button data-cmd="italic"><i>I</i></button>
      <button data-cmd="underline"><u>U</u></button>
      <button data-cmd="justifyLeft">‚üµ</button>
      <button data-cmd="justifyCenter">‚§í</button>
      <button data-cmd="justifyRight">‚ü∂</button>
      <button data-cmd="justifyFull">‚ò∞</button>
      <input type="file" id="imgUpload" accept="image/*" style="display:none;">
      <button id="imgBtn">üì∑ Insert Image</button>
      <button id="clearBtn">Clear</button>
    </div>
    <div class="canvas-wrap">
      <article class="page">
        <div id="editor" class="editor" contenteditable="true">
          <h1 style="margin-top:0;">Your title here</h1>
          <p>Start typing... default alignment is center. Insert images by clicking Insert Image or dragging one into this area.</p>
        </div>
      </article>
    </div>
  </section>

  <aside class="right">
    <div class="panel">
      <h4>Document Info</h4>
      <input id="docTitle" type="text" placeholder="Document title" value="PDFab ‚Äî ¬© PDFab 2025">
      <input id="docAuthor" type="text" placeholder="Author" value="PDFab">
      <button id="downloadBtn">Export PDF</button>
    </div>
  </aside>
</div>

<footer>Built with ‚ù§Ô∏è ‚Ä¢ PDFab 2025</footer>

<iframe id="print-frame" style="display:none;"></iframe>
</div>

<script>
const editor=document.getElementById('editor');
const toolbar=document.querySelector('.toolbar');
const imgUpload=document.getElementById('imgUpload');
const imgBtn=document.getElementById('imgBtn');
const clearBtn=document.getElementById('clearBtn');
const downloadBtn=document.getElementById('downloadBtn');
const themeToggle=document.getElementById('themeToggle');

// Toolbar commands
toolbar.addEventListener('click', e=>{
  const btn=e.target.closest('button[data-cmd]');
  if(!btn) return;
  document.execCommand('styleWithCSS', false, true);
  document.execCommand(btn.dataset.cmd, false, null);
  editor.focus();
});

// Clear formatting
clearBtn.addEventListener('click', ()=>{
  editor.querySelectorAll('*').forEach(el=>{
    if(el.tagName.toLowerCase()!=='img') el.removeAttribute('style');
  });
});

// Image insertion & interactive rotation
function makeImageInteractive(img){
  img.style.transform='rotate(0deg)'; img.dataset.rotation=0;
  const slider=document.createElement('input');
  slider.type='range'; slider.min=-180; slider.max=180; slider.value=0;
  slider.style.position='absolute'; slider.style.display='none'; slider.style.width='100px'; slider.style.zIndex=1000;
  document.body.appendChild(slider);
  img.addEventListener('click', e=>{
    e.stopPropagation();
    const rect=img.getBoundingClientRect();
    slider.style.left=rect.left+'px';
    slider.style.top=rect.bottom+5+'px';
    slider.style.display='block';
    slider.value=img.dataset.rotation;
    slider.focus();
  });
  slider.addEventListener('input', ()=>{
    const angle=slider.value;
    img.dataset.rotation=angle;
    img.style.transform=`rotate(${angle}deg)`;
  });
  document.addEventListener('click', ()=>{ slider.style.display='none'; });
}

function insertImageAtCaret(src){
  const img=document.createElement('img');
  img.src=src; img.className='inserted-image'; img.setAttribute('contenteditable','false');
  makeImageInteractive(img);
  const sel=window.getSelection();
  if(!sel.rangeCount){ editor.appendChild(img); return; }
  const range=sel.getRangeAt(0);
  range.deleteContents(); range.insertNode(img);
  range.setStartAfter(img); range.collapse(true);
  sel.removeAllRanges(); sel.addRange(range);
  editor.focus();
}

imgBtn.addEventListener('click', ()=>imgUpload.click());
imgUpload.addEventListener('change', e=>{
  const file=e.target.files[0];
  if(file && file.type.startsWith('image/')){
    const reader=new FileReader();
    reader.onload=()=>insertImageAtCaret(reader.result);
    reader.readAsDataURL(file);
  }
  e.target.value='';
});

// Export PDF
downloadBtn.addEventListener('click', ()=>{
  const htmlContent=`<html><head><title>${document.getElementById('docTitle').value}</title>
  <style>
    body{font-family:Arial; font-size:18px; padding:20px; color:#111; -webkit-print-color-adjust:exact; print-color-adjust:exact;}
    img{max-width:100%; height:auto; display:block; margin:12px auto; transform-origin:center;}
  </style></head>
  <body>${editor.innerHTML}</body></html>`;
  const printFrame=document.getElementById('print-frame');
  printFrame.style.display='block';
  printFrame.srcdoc=htmlContent;
  printFrame.onload=()=>{
    printFrame.contentWindow.focus();
    printFrame.contentWindow.print();
    printFrame.style.display='none';
  };
});

// Dark mode toggle
themeToggle.addEventListener('click', ()=>{
  document.body.classList.toggle('dark-mode');
  themeToggle.setAttribute('aria-pressed', document.body.classList.contains('dark-mode'));
});

// Make existing images interactive
editor.querySelectorAll('img').forEach(img=>makeImageInteractive(img));
</script>
</body>
</html>
