<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>PDF Generator — © Manik Roy 2025</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='18' fill='%2333a6a6'/%3E%3Ctext x='50' y='58' font-size='48' font-family='Arial' fill='white' text-anchor='middle'%3EMR%3C/text%3E%3C/svg%3E" />
<style>
  /* Reset & base */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #33a6a6, #1f4d4d);
    color: #f0f0f0;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  a, button {
    font-family: inherit;
  }

  /* Scrollbar for editor */
  #editor {
    scrollbar-width: thin;
    scrollbar-color: #33a6a6 #143535;
  }
  #editor::-webkit-scrollbar {
    width: 8px;
  }
  #editor::-webkit-scrollbar-track {
    background: #143535;
    border-radius: 4px;
  }
  #editor::-webkit-scrollbar-thumb {
    background-color: #33a6a6;
    border-radius: 4px;
  }

  /* Container */
  .app {
    max-width: 1200px;
    margin: 0 auto;
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 0 16px 24px;
  }

  /* Header - sticky */
  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: #004d4d;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    border-radius: 0 0 16px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 24px;
    user-select: none;
  }
  .brand {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .icon {
    background: linear-gradient(45deg, #33a6a6, #009999);
    width: 54px;
    height: 54px;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(51, 166, 166, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 900;
    font-size: 26px;
    color: white;
    user-select: none;
  }
  .title {
    font-size: 24px;
    font-weight: 900;
    text-shadow: 0 2px 6px rgba(0,0,0,0.7);
  }
  .sub {
    font-size: 13px;
    color: #a0eaea;
    font-weight: 600;
  }

  /* Header right controls */
  .header-controls {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  button#themeToggle {
    padding: 10px 18px;
    border-radius: 20px;
    border: none;
    background: linear-gradient(90deg, #66cccc, #33a6a6);
    color: white;
    font-weight: 700;
    font-size: 15px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(51,166,166,0.8);
    transition: background 0.3s ease;
  }
  button#themeToggle:hover,
  button#themeToggle:focus {
    background: linear-gradient(90deg, #33a6a6, #008080);
    outline: none;
  }

  /* Workspace - flex layout */
  .workspace {
    flex: 1 1 auto;
    display: flex;
    gap: 20px;
    margin-top: 20px;
  }

  /* Left panel */
  .left {
    flex: 1 1 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  /* Toolbar */
  .toolbar {
    background: #004d4d;
    border-radius: 16px;
    padding: 12px 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    align-items: center;
    box-shadow: 0 8px 18px rgba(0, 77, 77, 0.9);
  }
  .toolbar button,
  .toolbar select,
  .toolbar input[type="color"],
  .toolbar input[type="number"] {
    background: #066666;
    border: none;
    color: white;
    border-radius: 12px;
    padding: 12px 16px;
    font-weight: 700;
    font-size: 16px;
    cursor: pointer;
    box-shadow: 0 6px 12px rgba(0, 102, 102, 0.8);
    transition: background 0.3s ease;
    min-width: 44px;
    user-select: none;
  }
  .toolbar button:hover,
  .toolbar button:focus,
  .toolbar select:hover,
  .toolbar select:focus,
  .toolbar input[type="color"]:hover,
  .toolbar input[type="color"]:focus,
  .toolbar input[type="number"]:hover,
  .toolbar input[type="number"]:focus {
    background: #33a6a6;
    outline: none;
  }
  .toolbar select {
    min-width: 140px;
  }
  .toolbar input[type="number"] {
    width: 84px;
  }

  .toolbar button[data-cmd] b,
  .toolbar button[data-cmd] i,
  .toolbar button[data-cmd] u {
    pointer-events: none;
  }

  /* Editor container */
  .canvas-wrap {
    flex: 1 1 0;
    display: flex;
    justify-content: center;
  }
  .page {
    background: #033737;
    width: 100%;
    max-width: 840px;
    min-height: 1180px;
    border-radius: 24px;
    padding: 36px 44px;
    box-shadow:
      inset 0 0 40px rgba(51, 166, 166, 0.5),
      0 20px 60px rgba(0, 77, 77, 0.8);
    display: flex;
    flex-direction: column;
  }
  .editor {
    flex: 1 1 auto;
    background: #064646;
    border-radius: 18px;
    padding: 20px 28px;
    font-size: 18px;
    line-height: 1.6;
    color: #e0f2f2;
    outline: none;
    overflow-wrap: break-word;
    word-break: break-word;
    box-shadow: inset 0 0 12px rgba(0, 128, 128, 0.8);
    transition: box-shadow 0.3s ease;
    caret-color: #a0eaea;
    text-align: center;
  }
  .editor:focus {
    box-shadow: inset 0 0 20px #66cccc, 0 0 10px #33a6a6;
  }

  .editor img.inserted-image {
    max-width: 100%;
    border-radius: 16px;
    margin: 16px auto;
    box-shadow: 0 6px 20px rgba(51, 166, 166, 0.8);
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  .editor img.inserted-image:hover {
    transform: scale(1.04);
  }

  .page-footer {
    margin-top: 30px;
    font-size: 14px;
    color: #76c7c7;
    text-align: center;
    user-select: none;
    font-weight: 600;
  }

  /* Right sidebar */
  .right {
    width: 360px;
    background: #005454;
    border-radius: 24px;
    padding: 24px;
    box-shadow: 0 16px 40px rgba(0, 77, 77, 0.9);
    display: flex;
    flex-direction: column;
    gap: 24px;
  }
  .panel {
    background: #066666;
    border-radius: 20px;
    padding: 16px 20px;
    box-shadow: inset 0 0 12px rgba(51, 166, 166, 0.8);
    color: #c6f3f3;
  }
  .panel h4 {
    margin-top: 0;
    margin-bottom: 14px;
    font-weight: 800;
    letter-spacing: 1.1px;
    font-size: 18px;
    color: #a0eaea;
    user-select: none;
  }
  .panel label {
    font-weight: 600;
    margin-right: 8px;
  }
  .panel input,
  .panel select {
    width: 100%;
    background: #004d4d;
    border: none;
    border-radius: 12px;
    padding: 10px 14px;
    color: #d0f0f0;
    font-weight: 700;
    font-size: 16px;
    margin-top: 6px;
    box-shadow: inset 0 0 6px rgba(51, 166, 166, 0.8);
  }
  .panel input:focus,
  .panel select:focus {
    outline: none;
    box-shadow: 0 0 12px #33a6a6;
  }
  .panel button {
    margin-top: 16px;
    padding: 14px;
    border-radius: 24px;
    border: none;
    font-weight: 800;
    font-size: 18px;
    color: white;
    cursor: pointer;
    background: linear-gradient(90deg, #33a6a6, #1a7d7d);
    box-shadow: 0 8px 20px rgba(51, 166, 166, 0.8);
    transition: background 0.3s ease;
    user-select: none;
  }
  .panel button:hover,
  .panel button:focus {
    background: linear-gradient(90deg, #1a7d7d, #33a6a6);
    outline: none;
  }
  .panel small {
    font-size: 13px;
    color: #99c7c7;
  }
  .panel ul {
    margin: 8px 0 0 20px;
    padding: 0;
    list-style-type: disc;
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .right {
      width: 280px;
    }
  }
  @media (max-width: 768px) {
    .workspace {
      flex-direction: column;
    }
    .right {
      width: 100%;
    }
    .page {
      min-height: 700px;
      max-width: 100%;
      padding: 24px 32px;
    }
  }
  @media (max-width: 480px) {
    header {
      flex-direction: column;
      gap: 12px;
      border-radius: 0;
    }
    .toolbar {
      justify-content: center;
    }
    .toolbar button,
    .toolbar select,
    .toolbar input[type="color"],
    .toolbar input[type="number"] {
      min-width: 36px;
      padding: 10px 12px;
      font-size: 14px;
    }
    .toolbar select {
      min-width: 120px;
    }
    button#themeToggle {
      width: 100%;
      padding: 14px 0;
      font-size: 18px;
      border-radius: 28px;
    }
  }

  /* Dark mode toggle styles */
  body.dark-mode {
    background: linear-gradient(135deg, #121212, #1a1a1a);
    color: #e0e0e0;
  }
  body.dark-mode header {
    background: #222;
    box-shadow: 0 4px 12px rgba(255,255,255,0.1);
  }
  body.dark-mode .toolbar {
    background: #222;
    box-shadow: 0 8px 18px rgba(255, 255, 255, 0.1);
  }
  body.dark-mode .page {
    background: #1a1a1a;
    box-shadow: inset 0 0 40px rgba(51, 166, 166, 0.8), 0 20px 60px rgba(51, 166, 166, 0.6);
  }
  body.dark-mode .editor {
    background: #121212;
    color: #a0eaea;
    box-shadow: inset 0 0 12px rgba(51, 166, 166, 0.9);
  }
  body.dark-mode .right {
    background: #222;
    box-shadow: 0 16px 40px rgba(51, 166, 166, 0.7);
  }
  body.dark-mode .panel {
    background: #005454;
    box-shadow: inset 0 0 14px rgba(51, 166, 166, 0.9);
    color: #99eaea;
  }
  body.dark-mode .panel button {
    background: linear-gradient(90deg, #2e9d9d, #007777);
  }
  body.dark-mode .panel button:hover,
  body.dark-mode .panel button:focus {
    background: linear-gradient(90deg, #007777, #2e9d9d);
  }
  body.dark-mode button#themeToggle {
    background: linear-gradient(90deg, #007777, #2e9d9d);
  }
  body.dark-mode button#themeToggle:hover,
  body.dark-mode button#themeToggle:focus {
    background: linear-gradient(90deg, #2e9d9d, #007777);
  }
</style>
</head>
<body>
  <div class="app" role="application" aria-label="PDF Generator by Manik Roy 2025">
    <header>
      <div class="brand" aria-label="Application brand">
        <div class="icon" aria-hidden="true">MR</div>
        <div>
          <div class="title">PDF Generator</div>
          <div class="sub">© Manik Roy 2025 — Responsive & Offline</div>
        </div>
      </div>
      <div class="header-controls">
        <button id="themeToggle" aria-pressed="false" title="Toggle Dark/Light theme">Toggle Theme</button>
      </div>
    </header>

    <div class="workspace">
      <section class="left" aria-label="Editor and formatting toolbar">
        <div class="toolbar" role="toolbar" aria-label="Formatting controls">
          <div style="display:flex; gap: 12px; align-items: center;">
            <button data-cmd="bold" aria-label="Bold"><b>B</b></button>
            <button data-cmd="italic" aria-label="Italic"><i>I</i></button>
            <button data-cmd="underline" aria-label="Underline"><u>U</u></button>
          </div>

          <select id="fontSelect" aria-label="Font family selector">
            <option value="inherit">System</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="'Times New Roman', Times, serif">Times New Roman</option>
            <option value="Arial, Helvetica, sans-serif" selected>Arial</option>
            <option value="Verdana, sans-serif">Verdana</option>
            <option value="'Courier New', monospace">Courier New</option>
          </select>

          <input type="number" id="fontSize" aria-label="Font size in pixels" min="8" max="72" value="18" />

          <input type="color" id="colorPicker" aria-label="Text color picker" value="#a0eaea" />

          <div style="margin-left:auto; display:flex; gap:12px;">
            <button data-cmd="justifyLeft" aria-label="Align left">⟵</button>
            <button data-cmd="justifyCenter" aria-label="Align center">⤒</button>
            <button data-cmd="justifyRight" aria-label="Align right">⟶</button>
            <button data-cmd="justifyFull" aria-label="Justify">☰</button>
          </div>

          <input type="file" id="imgUpload" accept="image/*" style="display:none" aria-hidden="true" />
          <button id="imgBtn" aria-label="Insert Image">📷 Insert Image</button>

          <button id="clearBtn" aria-label="Clear formatting">Clear</button>
        </div>

        <div class="canvas-wrap">
          <article class="page" role="document" aria-label="Document editor page preview">
            <div
              id="editor"
              class="editor"
              contenteditable="true"
              spellcheck="true"
              aria-multiline="true"
              aria-label="Document editor"
              tabindex="0"
            >
              <h1 style="margin-top: 0;">Your title here</h1>
              <p>Start typing... default alignment is center. Insert images by clicking Insert Image or dragging one into this area.</p>
            </div>
            <footer class="page-footer" aria-hidden="true">
              <div>A4 • Portrait</div>
              <div>© Manik Roy 2025</div>
            </footer>
          </article>
        </div>
      </section>

      <aside class="right" aria-label="Document settings and export controls">
        <section class="panel" aria-labelledby="pageSettingsTitle">
          <h4 id="pageSettingsTitle">Page Settings</h4>
          <label for="pageSize">Size</label>
          <select id="pageSize" name="pageSize" aria-describedby="pageSizeDesc" aria-required="true">
            <option value="A4" selected>A4 (210×297mm)</option>
            <option value="Letter">Letter (8.5×11in)</option>
          </select>
          <small id="pageSizeDesc" style="display:block;margin-bottom:12px;">Choose page size</small>

          <label for="orientation">Orientation</label>
          <select id="orientation" name="orientation" aria-describedby="orientationDesc" aria-required="true">
            <option value="portrait" selected>Portrait</option>
            <option value="landscape">Landscape</option>
          </select>
          <small id="orientationDesc" style="display:block;margin-bottom:12px;">Select page orientation</small>

          <label for="margins">Margins (px)</label>
          <input id="margins" name="margins" type="number" min="0" max="120" value="28" />
        </section>

        <section class="panel" aria-labelledby="documentSettingsTitle">
          <h4 id="documentSettingsTitle">Document Info</h4>
          <input id="docTitle" type="text" placeholder="Document title" value="PDF Generator — © Manik Roy 2025" aria-label="Document title" />
          <input id="docAuthor" type="text" placeholder="Author" value="Manik Roy" aria-label="Document author" />
          <button id="downloadBtn" aria-label="Export document as PDF">Export PDF</button>
          <button id="previewBtn" style="margin-top: 10px; background: #228b22;">Preview</button>
        </section>

        <section class="panel" aria-label="User tips">
          <strong>Tips</strong>
          <ul>
            <li>Drag &amp; drop images into the editor.</li>
            <li>Click an image to select and resize.</li>
            <li>Use the Export PDF button to save your document.</li>
          </ul>
        </section>
      </aside>
    </div>

    <footer style="text-align:center; padding: 12px; font-size: 14px; font-weight: 600; color: #88d8d8; user-select:none;">
      Built with ❤️ • © Manik Roy 2025
    </footer>

    <iframe id="print-frame" style="display:none; width:100%; height:100%;"></iframe>
  </div>

<script>
  const editor = document.getElementById('editor');
  const toolbar = document.querySelector('.toolbar');
  const colorPicker = document.getElementById('colorPicker');
  const fontSelect = document.getElementById('fontSelect');
  const fontSize = document.getElementById('fontSize');
  const downloadBtn = document.getElementById('downloadBtn');
  const pageSizeSelect = document.getElementById('pageSize');
  const orientationSelect = document.getElementById('orientation');
  const marginsInput = document.getElementById('margins');
  const docTitleInput = document.getElementById('docTitle');
  const docAuthorInput = document.getElementById('docAuthor');
  const imgUpload = document.getElementById('imgUpload');
  const imgBtn = document.getElementById('imgBtn');
  const pageInfo = document.querySelector('.page-footer div:first-child');
  const clearBtn = document.getElementById('clearBtn');
  const themeToggle = document.getElementById('themeToggle');

  // Default center alignment on load
  document.execCommand('justifyCenter', false, null);

  // Toolbar click
  toolbar.addEventListener('click', e => {
    const btn = e.target.closest('button[data-cmd]');
    if (!btn) return;
    const cmd = btn.dataset.cmd;
    document.execCommand('styleWithCSS', false, true);
    document.execCommand(cmd, false, null);
    editor.focus();
  });

  function applyStyleToSelection(styleProp, value) {
    const sel = window.getSelection();
    if (!sel || !sel.rangeCount) {
      editor.style[styleProp] = value;
      return;
    }
    const range = sel.getRangeAt(0);
    if (range.collapsed) {
      editor.style[styleProp] = value;
      return;
    }
    const content = range.extractContents();
    const wrapper = document.createElement('span');
    wrapper.style[styleProp] = value;
    wrapper.style.display = 'inline';
    wrapper.appendChild(content);
    range.insertNode(wrapper);

    sel.removeAllRanges();
    const newRange = document.createRange();
    newRange.setStartAfter(wrapper);
    newRange.collapse(true);
    sel.addRange(newRange);
  }

  fontSelect.addEventListener('change', () => {
    const font = fontSelect.value;
    applyStyleToSelection('fontFamily', font === 'inherit' ? '' : font);
    editor.focus();
  });

  fontSize.addEventListener('input', () => {
    let px = fontSize.value;
    if (!px || px < 1) px = 16;
    applyStyleToSelection('fontSize', px + 'px');
    editor.focus();
  });

  colorPicker.addEventListener('input', () => {
    applyStyleToSelection('color', colorPicker.value);
    editor.focus();
  });

  clearBtn.addEventListener('click', () => {
    editor.querySelectorAll('span').forEach(s => {
      if (s.style.length > 0) {
        const parent = s.parentNode;
        while (s.firstChild) parent.insertBefore(s.firstChild, s);
        parent.removeChild(s);
      }
    });
    editor.querySelectorAll('*').forEach(el => {
      if (el.tagName.toLowerCase() !== 'img') el.removeAttribute('style');
    });
    const text = editor.innerText;
    editor.innerHTML = '<div style="text-align:center;">' + text.replace(/\n/g, '<br>') + '</div>';
  });

  function updatePageInfo() {
    pageInfo.textContent = `${pageSizeSelect.value} • ${orientationSelect.value === 'portrait' ? 'Portrait' : 'Landscape'}`;
  }
  pageSizeSelect.addEventListener('change', updatePageInfo);
  orientationSelect.addEventListener('change', updatePageInfo);
  updatePageInfo();

  imgBtn.addEventListener('click', () => imgUpload.click());
  imgUpload.addEventListener('change', e => {
    const file = e.target.files[0];
    if (file && file.type.startsWith('image/')) {
      const reader = new FileReader();
      reader.onload = () => {
        const img = document.createElement('img');
        img.src = reader.result;
        img.className = 'inserted-image';
        img.style.width = '80%';
        img.style.cursor = 'pointer';
        insertImageAtCaret(img);
      };
      reader.readAsDataURL(file);
    }
    e.target.value = '';
  });

  function insertImageAtCaret(img) {
    const sel = window.getSelection();
    if (!sel.rangeCount) {
      editor.appendChild(img);
      return;
    }
    const range = sel.getRangeAt(0);
    range.deleteContents();
    range.insertNode(img);
    range.setStartAfter(img);
    range.collapse(true);
    sel.removeAllRanges();
    sel.addRange(range);
    editor.focus();
  }

  downloadBtn.addEventListener('click', () => {
    const orientation = orientationSelect.value;
    const margin = parseInt(marginsInput.value) || 28;
    const htmlContent = `
      <html>
        <head>
          <title>${docTitleInput.value}</title>
          <style>
            @page { size: ${pageSizeSelect.value} ${orientation}; margin: ${margin}px; }
            body {
              font-family: Arial, sans-serif;
              font-size: 18px;
              color: #111;
              padding: ${margin}px;
              margin: 0;
              background: white;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              word-wrap: break-word;
              overflow-wrap: break-word;
            }
            img {
              max-width: 100%;
              height: auto;
              page-break-inside: avoid;
              display: block;
              margin: 12px auto;
            }
            div { word-break: break-word; }
            footer {
              font-size: 12px;
              color: #777;
              margin-top: 40px;
              text-align: center;
            }
          </style>
        </head>
        <body>
          <div>${editor.innerHTML}</div>
          <footer>© Manik Roy 2025</footer>
        </body>
      </html>`;
    const printFrame = document.getElementById('print-frame');
    printFrame.style.display = 'block';
    printFrame.srcdoc = htmlContent;
    printFrame.onload = () => {
      printFrame.contentWindow.focus();
      printFrame.contentWindow.print();
      printFrame.style.display = 'none';
    };
  });

  themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    const pressed = document.body.classList.contains('dark-mode');
    themeToggle.setAttribute('aria-pressed', pressed.toString());
  });
</script>
</body>
</html>
