<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>PDFab</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%23336699'/%3E%3Ctext x='50' y='58' font-size='40' font-family='Arial' fill='white' text-anchor='middle'%3EP%3C/text%3E%3C/svg%3E" />
<style>
  *, *::before, *::after { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #e0e5ec;
    color: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }

  .app-frame {
    background: #e0e5ec;
    border-radius: 24px;
    padding: 16px;
    width: 95%;
    max-width: 1300px;
    height: 95vh;
    display: flex;
    flex-direction: column;
    box-shadow: 20px 20px 60px #b8bcc6, -20px -20px 60px #ffffff;
  }

  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 24px;
    border-radius: 16px;
    background: #e0e5ec;
    box-shadow: 6px 6px 12px #b8bcc6, -6px -6px 12px #ffffff;
  }
  .brand { display: flex; align-items: center; gap: 12px; }
  .icon {
    width: 50px; height: 50px;
    border-radius: 50%;
    background: #336699;
    display: flex; align-items: center; justify-content: center;
    color: white; font-weight: 900; font-size: 28px;
    box-shadow: 4px 4px 8px #2a557f, -4px -4px 8px #3e77b0;
  }
  .title { font-size: 24px; font-weight: 900; }
  .sub { font-size: 14px; color: #555; font-weight: 600; }

  .workspace { display: flex; flex:1; gap:16px; margin-top:16px; overflow:hidden; }
  .left { flex:1; display:flex; flex-direction:column; gap:12px; }
  .toolbar {
    display:flex; flex-wrap:wrap; gap:8px; padding:8px; border-radius:16px;
    background: #e0e5ec; box-shadow: inset 4px 4px 8px #b8bcc6, inset -4px -4px 8px #ffffff;
  }
  .toolbar button, .toolbar select, .toolbar input[type="number"], .toolbar input[type="color"]{
    border:none; border-radius:12px; padding:8px 12px; cursor:pointer;
    background:#e0e5ec; box-shadow: 4px 4px 8px #b8bcc6, -4px -4px 8px #ffffff;
    font-weight:700;
  }
  .canvas-wrap { flex:1; display:flex; justify-content:center; overflow:auto; }
  .page {
    background: #e0e5ec;
    width:100%; max-width:840px; min-height:1180px;
    border-radius:24px; padding:36px 44px;
    box-shadow: inset 4px 4px 8px #b8bcc6, inset -4px -4px 8px #ffffff;
    display:flex; flex-direction:column;
  }
  .editor {
    flex:1; padding:16px; border-radius:16px; background:#e0e5ec;
    box-shadow: inset 4px 4px 8px #b8bcc6, inset -4px -4px 8px #ffffff;
    outline:none; overflow:auto; font-size:18px; line-height:1.6; text-align:center;
    word-break:break-word;
  }
  .editor img.inserted-image { max-width:100%; margin:12px auto; display:block; border-radius:12px; cursor:pointer; }
  .page-footer { text-align:center; font-size:12px; color:#555; margin-top:24px; }

  .right { width:300px; display:flex; flex-direction:column; gap:12px; overflow:auto; }
  .panel { background:#e0e5ec; border-radius:16px; padding:12px; box-shadow: inset 4px 4px 8px #b8bcc6, inset -4px -4px 8px #ffffff; }
  .panel input, .panel select, .panel button { width:100%; margin-top:8px; border:none; border-radius:12px; padding:8px; box-shadow: 4px 4px 8px #b8bcc6, -4px -4px 8px #ffffff; cursor:pointer; }
  .panel button { background:#e0e5ec; font-weight:700; }

  button#themeToggle { padding:8px 16px; border-radius:20px; cursor:pointer; background:#e0e5ec; box-shadow:4px 4px 8px #b8bcc6, -4px -4px 8px #ffffff; font-weight:700; }

  /* Dark Mode */
  body.dark-mode, body.dark-mode .app-frame { background:#2b2b3b; box-shadow:20px 20px 60px #1a1a2b, -20px -20px 60px #40405a; color:#e0e5ec; }
  body.dark-mode header, body.dark-mode .toolbar, body.dark-mode .panel, body.dark-mode .page, body.dark-mode .editor {
    background:#2b2b3b; box-shadow: inset 4px 4px 8px #1a1a2b, inset -4px -4px 8px #40405a; color:#e0e5ec;
  }
  body.dark-mode .toolbar button, body.dark-mode .toolbar select, body.dark-mode .toolbar input, body.dark-mode .panel input, body.dark-mode .panel select, body.dark-mode .panel button { background:#2b2b3b; color:#e0e5ec; box-shadow: 4px 4px 8px #1a1a2b, -4px -4px 8px #40405a; }

  @media(max-width:1024px){.right{width:250px;}} 
  @media(max-width:768px){.workspace{flex-direction:column;} .right{width:100%;}}
</style>
</head>
<body>
<div class="app-frame">
<header>
  <div class="brand">
    <div class="icon">P</div>
    <div>
      <div class="title">PDFab</div>
      <div class="sub">Â© PDFab 2025</div>
    </div>
  </div>
  <button id="themeToggle">Toggle Theme</button>
</header>

<div class="workspace">
  <section class="left">
    <div class="toolbar">
      <button data-cmd="bold"><b>B</b></button>
      <button data-cmd="italic"><i>I</i></button>
      <button data-cmd="underline"><u>U</u></button>
      <button data-cmd="justifyLeft">âŸµ</button>
      <button data-cmd="justifyCenter">â¤’</button>
      <button data-cmd="justifyRight">âŸ¶</button>
      <button data-cmd="justifyFull">â˜°</button>
      <select id="fontSelect">
        <option value="inherit">System</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="'Times New Roman', Times, serif">Times New Roman</option>
        <option value="Arial, Helvetica, sans-serif" selected>Arial</option>
        <option value="Verdana, sans-serif">Verdana</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select>
      <input type="number" id="fontSize" min="8" max="72" value="18" />
      <input type="color" id="colorPicker" value="#111111" />
      <input type="file" id="imgUpload" accept="image/*" style="display:none" />
      <button id="imgBtn">ðŸ“· Insert Image</button>
      <button id="clearBtn">Clear</button>
    </div>
    <div class="canvas-wrap">
      <article class="page">
        <div id="editor" class="editor" contenteditable="true" spellcheck="true">
          <h1 style="margin-top:0;">Your title here</h1>
          <p>Start typing... Insert images using the button above.</p>
        </div>
        <footer class="page-footer">A4 â€¢ Portrait</footer>
      </article>
    </div>
  </section>

  <aside class="right">
    <div class="panel">
      <label>Page Size</label>
      <select id="pageSize"><option value="A4" selected>A4</option><option value="Letter">Letter</option></select>
      <label>Orientation</label>
      <select id="orientation"><option value="portrait" selected>Portrait</option><option value="landscape">Landscape</option></select>
      <label>Margins (px)</label>
      <input id="margins" type="number" value="28" min="0" max="120" />
    </div>
    <div class="panel">
      <label>Document Title</label>
      <input id="docTitle" type="text" value="PDFab â€” Â© PDFab 2025" />
      <label>Author</label>
      <input id="docAuthor" type="text" value="PDFab" />
      <button id="downloadBtn">Export PDF</button>
    </div>
  </aside>
</div>
<iframe id="print-frame" style="display:none;"></iframe>
</div>

<script>
const editor = document.getElementById('editor');
const toolbar = document.querySelector('.toolbar');
const colorPicker = document.getElementById('colorPicker');
const fontSelect = document.getElementById('fontSelect');
const fontSize = document.getElementById('fontSize');
const downloadBtn = document.getElementById('downloadBtn');
const pageSizeSelect = document.getElementById('pageSize');
const orientationSelect = document.getElementById('orientation');
const marginsInput = document.getElementById('margins');
const docTitleInput = document.getElementById('docTitle');
const docAuthorInput = document.getElementById('docAuthor');
const imgUpload = document.getElementById('imgUpload');
const imgBtn = document.getElementById('imgBtn');
const clearBtn = document.getElementById('clearBtn');
const themeToggle = document.getElementById('themeToggle');
const pageFooter = document.querySelector('.page-footer');

document.execCommand('justifyCenter', false, null);

toolbar.addEventListener('click', e=>{
  const btn = e.target.closest('button[data-cmd]');
  if(!btn) return;
  const cmd = btn.dataset.cmd;
  document.execCommand('styleWithCSS', false, true);
  document.execCommand(cmd, false, null);
  editor.focus();
});

function applyStyleToSelection(styleProp, value){
  const sel = window.getSelection();
  if(!sel || !sel.rangeCount){ editor.style[styleProp]=value; return; }
  const range = sel.getRangeAt(0);
  if(range.collapsed){ editor.style[styleProp]=value; return; }
  const content = range.extractContents();
  const wrapper = document.createElement('span');
  wrapper.style[styleProp]=value;
  wrapper.appendChild(content);
  range.insertNode(wrapper);
  sel.removeAllRanges();
  const newRange = document.createRange();
  newRange.setStartAfter(wrapper);
  newRange.collapse(true);
  sel.addRange(newRange);
}

fontSelect.addEventListener('change', ()=>applyStyleToSelection('fontFamily', fontSelect.value==='inherit'?'':fontSelect.value));
fontSize.addEventListener('input', ()=>applyStyleToSelection('fontSize', fontSize.value+'px'));
colorPicker.addEventListener('input', ()=>applyStyleToSelection('color', colorPicker.value));

clearBtn.addEventListener('click', ()=>{
  editor.querySelectorAll('span').forEach(s=>{ const p=s.parentNode; while(s.firstChild)p.insertBefore(s.firstChild,s); p.removeChild(s); });
  editor.querySelectorAll('*').forEach(el=>{ if(el.tagName.toLowerCase()!=='img') el.removeAttribute('style'); });
  const text=editor.innerText;
  editor.innerHTML='<div style="text-align:center;">'+text.replace(/\n/g,'<br>')+'</div>';
});

function updatePageFooter(){ pageFooter.textContent=`${pageSizeSelect.value} â€¢ ${orientationSelect.value==='portrait'?'Portrait':'Landscape'}`; }
pageSizeSelect.addEventListener('change', updatePageFooter);
orientationSelect.addEventListener('change', updatePageFooter);
updatePageFooter();

imgBtn.addEventListener('click', ()=>imgUpload.click());
imgUpload.addEventListener('change', e=>{
  const file = e.target.files[0];
  if(file && file.type.startsWith('image/')){
    const reader = new FileReader();
    reader.onload=()=>{
      const img=document.createElement('img');
      img.src=reader.result;
      img.className='inserted-image';
      insertImageAtCaret(img);
    };
    reader.readAsDataURL(file);
  }
  e.target.value='';
});

function insertImageAtCaret(img){
  const sel = window.getSelection();
  if(!sel.rangeCount){ editor.appendChild(img); return; }
  const range = sel.getRangeAt(0);
  range.deleteContents();
  range.insertNode(img);
  range.setStartAfter(img);
  range.collapse(true);
  sel.removeAllRanges();
  sel.addRange(range);
  editor.focus();
}

downloadBtn.addEventListener('click', ()=>{
  const orientation = orientationSelect.value;
  const margin = parseInt(marginsInput.value)||28;
  const htmlContent = `
<html>
<head>
<title>${docTitleInput.value}</title>
<style>
@page{size:${pageSizeSelect.value} ${orientation};margin:${margin}px;}
body{font-family:Arial,sans-serif;font-size:18px;color:#111;margin:0;padding:${margin}px;-webkit-print-color-adjust:exact;print-color-adjust:exact;}
img{max-width:100%;height:auto;display:block;margin:12px auto;page-break-inside:avoid;}
div{word-break:break-word;}
footer{text-align:center;color:#555;font-size:12px;margin-top:40px;}
</style>
</head>
<body>
<div>${editor.innerHTML}</div>
<footer>Â© PDFab 2025</footer>
</body>
</html>`;
  const printFrame=document.getElementById('print-frame');
  printFrame.srcdoc=htmlContent;
  printFrame.onload=()=>{ printFrame.contentWindow.focus(); printFrame.contentWindow.print(); };
});

themeToggle.addEventListener('click', ()=>document.body.classList.toggle('dark-mode'));
</script>
</body>
</html>
