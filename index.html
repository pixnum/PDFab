<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PDF Generator — © Manik Roy 2025</title>

<!-- Inline SVG favicon -->
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='18' fill='%232a9d8f'/%3E%3Ctext x='50' y='58' font-size='48' font-family='Arial' fill='white' text-anchor='middle'%3EMR%3C/text%3E%3C/svg%3E" />

<style>
  :root{
    --bg: #ffffff;
    --panel: #f6f7f9;
    --text: #111827;
    --muted: #6b7280;
    --accent: #2563eb;
    --accent-2:#2a9d8f;
    --toolbar:#ffffffcc;
    --shadow: 0 6px 20px rgba(16,24,40,0.06);
  }

  @media (prefers-color-scheme: dark){
    :root{
      --bg: #0b1020;
      --panel: #071022;
      --text: #e6eef8;
      --muted: #9aa9bf;
      --accent: #60a5fa;
      --accent-2:#2ab7a0;
      --toolbar:#071122cc;
      --shadow: 0 8px 24px rgba(2,6,23,0.6);
    }
  }

  body{
    margin:0;
    font-family: Inter, Arial, sans-serif;
    background: linear-gradient(180deg,var(--bg),var(--panel));
    color:var(--text);
    min-height:100vh;
    display:flex;
    flex-direction:column;
    gap:18px;
    padding:18px;
  }

  .app {
    max-width:1200px;
    margin:0 auto;
    width:100%;
    display:flex;
    flex-direction:column;
    gap:12px;
  }

  header.app-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }

  .brand {
    display:flex;
    align-items:center;
    gap:12px;
  }

  .icon {
    width:48px;height:48px;border-radius:10px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    display:flex;align-items:center;justify-content:center;
    color:white;font-weight:700;font-size:20px;box-shadow:var(--shadow);
  }

  .toolbar {
    background:var(--toolbar);
    border-radius:12px;
    padding:8px;
    display:flex;
    gap:8px;
    align-items:center;
    flex-wrap:wrap;
    box-shadow:var(--shadow);
  }
  .toolbar button, .toolbar select, .toolbar input[type=color]{
    border:1px solid rgba(0,0,0,0.06);
    padding:8px 10px;
    border-radius:8px;
    cursor:pointer;
    background:transparent;
    color:var(--text);
  }

  .canvas-wrap { display:flex; justify-content:center; padding:12px; }
  .page {
    width:100%;
    max-width:820px;
    min-height:1120px;
    background:var(--bg);
    border-radius:12px;
    padding:28px;
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
    box-sizing:border-box;
  }
  .editor {
    flex:1;
    padding:18px;
    outline:none;
    min-height:420px;
    width:100%;
    max-width:760px;
    margin:0 auto;
    color:var(--text);
    font-size:16px;
    line-height:1.5;
    text-align:center; /* Default center */
  }
  .page-footer {
    display:flex;
    justify-content:space-between;
    font-size:13px;
    color:var(--muted);
    border-top:1px dashed rgba(0,0,0,0.05);
    padding-top:12px;
  }

  @media (max-width:920px){
    .workspace{flex-direction:column;}
  }

  /* Print exact colors & sizes */
  @media print {
    *, *::before, *::after {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      color-adjust: exact !important;
    }
  }
</style>
</head>
<body>
  <div class="app">
    <header class="app-header">
      <div class="brand">
        <div class="icon">MR</div>
        <div>
          <strong>PDF Generator</strong><br>
          <small>© Manik Roy 2025</small>
        </div>
      </div>
      <div>
        <button id="themeToggle">Toggle Theme</button>
        <button id="exportBtn">Export PDF</button>
      </div>
    </header>

    <div class="toolbar">
      <button data-cmd="bold"><b>B</b></button>
      <button data-cmd="italic"><i>I</i></button>
      <button data-cmd="underline"><u>U</u></button>

      <select id="fontSelect">
        <option value="inherit">System</option>
        <option value="Georgia, serif">Georgia</option>
        <option value="Arial, sans-serif">Arial</option>
        <option value="'Courier New', monospace">Courier New</option>
      </select>

      <select id="sizeSelect">
        <option value="14px">14px</option>
        <option value="16px">16px</option>
        <option value="18px" selected>18px</option>
        <option value="20px">20px</option>
        <option value="24px">24px</option>
      </select>

      <input type="color" id="colorPicker" value="#111827">

      <button data-cmd="justifyLeft">⟵</button>
      <button data-cmd="justifyCenter">⤒</button>
      <button data-cmd="justifyRight">⟶</button>
      <button data-cmd="justifyFull">☰</button>
    </div>

    <div class="canvas-wrap">
      <div class="page">
        <div id="editor" class="editor" contenteditable="true">
          <h1>Your title here</h1>
          <p>Start typing... This is editable text.</p>
        </div>
        <div class="page-footer">
          <span>A4 • Portrait</span>
          <span>© Manik Roy 2025</span>
        </div>
      </div>
    </div>
  </div>

<script>
const editor = document.getElementById('editor');

// Formatting buttons
document.querySelector('.toolbar').addEventListener('click', e => {
  const btn = e.target.closest('button[data-cmd]');
  if (!btn) return;
  const cmd = btn.dataset.cmd;
  document.execCommand('styleWithCSS', false, true);
  document.execCommand(cmd, false, null);
});

// Font family
document.getElementById('fontSelect').addEventListener('change', e => {
  document.execCommand('styleWithCSS', false, true);
  document.execCommand('fontName', false, e.target.value);
});

// Accurate font size
function applyFontSize(size) {
  document.execCommand('styleWithCSS', false, true);
  document.execCommand('fontSize', false, '7'); 
  editor.querySelectorAll('font[size="7"]').forEach(el => {
    const span = document.createElement('span');
    span.style.fontSize = size;
    span.innerHTML = el.innerHTML;
    el.replaceWith(span);
  });
}
document.getElementById('sizeSelect').addEventListener('change', e => {
  applyFontSize(e.target.value);
});

// Accurate color
document.getElementById('colorPicker').addEventListener('input', e => {
  document.execCommand('styleWithCSS', false, true);
  document.execCommand('foreColor', false, e.target.value);
  editor.querySelectorAll('font[color]').forEach(el => {
    const span = document.createElement('span');
    span.style.color = e.target.value;
    span.innerHTML = el.innerHTML;
    el.replaceWith(span);
  });
});

// Export PDF via print dialog
function buildPrintHTML(){
  const html = `
    <html>
    <head>
      <meta charset="utf-8">
      <style>
        @page { size: A4 portrait; margin: 28px; }
        html,body{
          margin:0; padding:0;
          -webkit-print-color-adjust: exact !important;
          print-color-adjust: exact !important;
        }
        *{ -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
      </style>
    </head>
    <body>${editor.innerHTML}
      <div style="margin-top:20px;font-size:12px;display:flex;justify-content:space-between;">
        <span>© Manik Roy 2025</span>
        <span>${new Date().toLocaleString()}</span>
      </div>
    </body>
    </html>`;
  return html;
}

document.getElementById('exportBtn').addEventListener('click', () => {
  const win = window.open('', '_blank');
  win.document.write(buildPrintHTML());
  win.document.close();
  win.print();
});

// Theme toggle
document.getElementById('themeToggle').addEventListener('click', () => {
  if (document.documentElement.style.colorScheme === 'dark') {
    document.documentElement.style.colorScheme = 'light';
  } else {
    document.documentElement.style.colorScheme = 'dark';
  }
});
</script>
</body>
</html>
